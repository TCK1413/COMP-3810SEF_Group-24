<%- include('../partials/_top') %>

<main class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Shipping Addresses</h2>
    <a class="btn btn-primary" href="/user/addresses/new">Add Address</a>
  </div>

  <% if (!addresses || addresses.length === 0) { %>
    <div class="alert alert-info">No addresses yet. Click “Add Address”.</div>
  <% } else { %>
    <div class="list-group">
      <% addresses.forEach(addr => { %>
        <div class="list-group-item">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <div><strong><%= addr.street %></strong></div>
              <div><%= addr.city %>, <%= addr.postalCode %>, <%= addr.country %></div>
     
               <% if (addr.phone) { %><div>Phone: <%= addr.phone %></div><% } %>
              <% if (addr.isDefault) { %>
                <span class="badge text-bg-success mt-2">Default</span>
              <% } %>
            </div>
            <div class="d-flex gap-2">
   
               <a class="btn btn-sm btn-outline-secondary" href="/user/addresses/<%= addr._id %>/edit">Edit</a>
              <form method="POST" action="/user/addresses/<%= addr._id %>?_method=DELETE" onsubmit="return confirm('Delete this address?')">
                <button class="btn btn-sm btn-outline-danger">Delete</button>
              </form>
              <% if (!addr.isDefault) { %>
          
                <form method="POST" action="/user/addresses/<%= addr._id %>/default">
                  <button class="btn btn-sm btn-outline-primary">Set as Default</button>
                </form>
              <% } %>
            </div>
          </div>
        </div>
     
         <% }) %>
    </div>
  <% } %>

  <div class="mt-3">
    <a class="btn btn-link" href="/user/profile">Back to Profile</a>
  </div>
</main>

<%- include('../partials/_bottom') %>
